<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬´í•œìŠ¬ë¼ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .slider {
            width: 500px;
            height: 200px;
            overflow: hidden;
        }

        .content-wrapper {
            display: flex;
            transition: 0.5s;
        }

        .content {
            height: 200px;
            background-color: lightgrey;
            flex-shrink: 0;

            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #222;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="slider">
        <ul class="content-wrapper">
            <li class="content">1(ì²˜ìŒ)</li>
            <li class="content">2</li>
            <li class="content">3</li>
            <li class="content">4</li>
            <li class="content">5</li>
            <li class="content">6</li>
            <li class="content">7</li>
            <li class="content">8(ë)</li>
        </ul>
    </div>
    <div class="controls">
        <button class="prev">prev</button>
        <button class="next">next</button>
    </div>

    <script>
        const viewCount = 4;
        const gap = 4;
        const slider = document.querySelector('.slider')
        const contentWrapper = document.querySelector('.content-wrapper');
        // const slideCount = contentWrapper.childElementCount;
        const prevButton = document.querySelector('.prev');
        const nextButton = document.querySelector('.next');
        const playTime = 500;

        const contentSlider = (slider.clientWidth - gap * (viewCount - 1)) / viewCount

        // ë³µì‚¬ë³¸ ë¼ì›Œë„£ê¸°.

        // í˜„ì¬ ë·°ì¹´ìš´íŠ¸ê°€ ë‹¬ë¼ì§€ë©´ ì˜¤ì‘ë™í•˜ëŠ” ì´ìŠˆê°€ ìˆìŠµë‹ˆë‹¤.
        // ì´ëŠ” ë·°ì¹´ìš´íŠ¸ ê°œìˆ˜ë§Œí¼ í´ë¡ ì„ ë§Œë“¤ì–´ì•¼í•˜ëŠ”ë°
        // ê¸°ì¡´ì˜ ì‘ì„±ì€ viewCountê°€ 1ì¸ ê²½ìš°ì—ë§Œ ì˜¬ë°”ë¥´ê²Œ ì‘ë™ë˜ëŠ” ìƒí™©ì…ë‹ˆë‹¤.
        // ë°˜ë³µë¬¸ì„ ì´ìš©í•´ viewCount ê°œìˆ˜ë§Œí¼ cloneì„ ë§Œë“¤ì–´ì£¼ë©´ í•´ê²° ë  ê²ƒ ê°™ì€ë°,
        // ë°˜ë³µë¬¸ì„ í•œë²ˆë§Œ ì“°ê²Œ ë˜ë©´ 1 2 3 4 5 -> [1] [4] 1 2 3 4 [1] [4] ì´ëŸ°ì‹ìœ¼ë¡œ ë  ê²ë‹ˆë‹¤.
    
        // ë³µì‚¬í•˜ëŠ” ë¶€ë¶„ê³¼ ë¼ì›Œë„£ëŠ” ë¶€ë¶„ì„ ë³„ë„ë¡œ ë¶„ë¦¬í•´ì„œ (forë¬¸ 2ê°œ ì´ìƒ ì“°ë¼ëŠ” ì´ì•¼ê¸°!)
        // ë³µì‚¬ë³¸ì„ ì ì ˆí•œ ìœ„ì¹˜ì— ì˜ ë„£ì–´ ë³´ë„ë¡ í•©ì‹œë‹¤.

        

        // firstElemnetChild ----> children[index] ì´ëŸ°ì‹ìœ¼ë¡œ ë°”ê»´ì•¼í•¨.


        // for (let i = 0 ; i < viewCount ; i++) {
        //     const cloneFirst = contentWrapper.children[i].cloneNode(true)
        //     contentWrapper.appendChild(cloneFirst);
        // }

        // for (let i = 0 ; i < contentWrapper.childElementCount - viewCount; i++) {
        //     i = i + (contentWrapper.childElementCount - viewCount - 1);
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);

        // }

        // // ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ¤ ë‚´ê°€ í•œ ê²ƒ

        // for (let i = 0 ; i < viewCount; i++) {
        //     const cloneFirst = contentWrapper.children[i].cloneNode(true)
        //     contentWrapper.appendChild(cloneFirst);
           
        // }

        // // 8 7 6 5 ë¡œ ë‚˜ì˜´ ....
        // // for (let i = 0 ; i < viewCount; i++) {
        // //     const cloneLast = contentWrapper.children[i + (contentWrapper.childElementCount - viewCount*2)].cloneNode(true)
        // //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);

        // // }
        

        // for (let i = viewCount; i > 0; i--) {
        //     const cloneLast = contentWrapper.children[i + (contentWrapper.childElementCount - viewCount*2)-1].cloneNode(true)
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);

        // }
        

        //  // ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ¤



        // ğŸ’™ ì‰¬ìš´ ì •ë‹µ!! 
        
        
        const cloneFirst = [];
        const cloneLast = [];

        for (let i = 0 ; i < viewCount ; i++) {
            cloneFirst.push(contentWrapper.children[i].cloneNode(true));
            cloneLast.push(contentWrapper.children[contentWrapper.childElementCount - 1 - i].cloneNode(true));
        }
        
        
        for (let i = 0 ; i < viewCount ; i++) {
            contentWrapper.appendChild(cloneFirst[i])
            contentWrapper.insertBefore(cloneLast[i], contentWrapper.firstElementChild);
        }


        // for (let i = 0 ; i < viewCount; i++) { 

        //     const cloneFirst = contentWrapper.children[i].cloneNode(true);
        //     contentWrapper.appendChild(cloneFirst);
            
        // }

        // for (let i = 0 ; i < contentWrapper.childElementCount - viewCount; i++) {
        //     i--; 
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);

        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);
            
        // }


          
         

        // for (let i = 0; i < viewCount ; i++) {
        //     i = i + (contentWrapper.childElementCount - (viewCount*2));
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);

        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);
        // }


        // for (let i = 0 ; i < contentWrapper.childElementCount - viewCount ; i++ ) {
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);
        // }

        // ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ ë²ˆí˜¸ êµ¬í•˜ëŠ” ì‹
        // contentWrapper.childElementCount - viewCount - 1;

        // for (let i = 8 ; i < contentWrapper.childElementCount - viewCount - 1 ; i++) {
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);
        // }
        
        // for (let i = 0 ; i < viewCount ; i++) {
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);
        // }


        // for (let i = 8 ; i < viewCount - 1; i++) {
        //     const cloneLast = contentWrapper.children[i].cloneNode(true);
        // }
        
        // const cloneFirst = contentWrapper.children[i].cloneNode(true)
        // const cloneLast = contentWrapper.children[j].cloneNode(true)

        // for (let i = 0 ; i < viewCount ; i++) {
        //     for (let j = 0 ; j < i + (contentWrapper.childElementCount - (viewCount * 3)) ; j++ ) {

        //         contentWrapper.appendChild(cloneFirst);
        //         contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild)
        //     }

        // }



        // ë°˜ë³µë¬¸ì„ í•œë²ˆë§Œ ì“°ê²Œ ë˜ë©´ 1 2 3 4 5 -> [1] [4] 1 2 3 4 [1] [4] ì´ëŸ°ì‹ìœ¼ë¡œ ë  ê²ë‹ˆë‹¤.
        // for(let i = 0 ; i < viewCount ; i++) {

        //     const cloneFirst = contentWrapper.firstElementChild.cloneNode(true);
        //     const cloneLast = contentWrapper.lastElementChild.cloneNode(true);

        //     contentWrapper.appendChild(cloneFirst);
        //     contentWrapper.insertBefore(cloneLast, contentWrapper.firstElementChild);

        // }


        let index = viewCount ;
        let playAble = true;

        applyIndexToSlider(false);

        contentWrapper.style.gap = `${gap}px`

        for(let i = 0 ; i < contentWrapper.childElementCount ; i ++) {
            contentWrapper.children[i].style.width = `${contentSlider}px`
        }

        prevButton.addEventListener('click',()=>{
            if(playAble) {
                playAble = false;

                index--;
                applyIndexToSlider(true)
            

                setTimeout(() => {
                    playAble = true;

                    if(index < viewCount ){
                        index = contentWrapper.childElementCount - viewCount - 1;
                        applyIndexToSlider(false) 
                    }                          
                }, playTime);          
            }
        })


        nextButton.addEventListener('click',()=>{
            if (playAble) {
                playAble = false;

                index++;
                // ì¼ë‹¨ ì¬ìƒí•˜ê³ ,
                applyIndexToSlider(true)

                setTimeout(() => {
                    playAble = true;

                    if(index === contentWrapper.childElementCount - viewCount) {                
                // transition ì§€ì†ì‹œê°„ë§Œí¼ ì‹œê°„ì´ íë¥¸ ë’¤ì—
                // transitionì„ 0ìœ¼ë¡œ ë§Œë“¤ê³ , ì¢Œí‘œë¥¼ ì²«ë²ˆì§¸ ìŠ¬ë¼ì´ë“œë¡œ ë°”ê¿”ì¹˜ê¸°í•œë‹¤.            
                        index = viewCount;  
                        applyIndexToSlider(false)                                            
                    }
                }, playTime);
            }
        })          
            
    
        // ë¬´í•œìŠ¬ë¼ì´ë“œì—ì„œ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ë³µ ì‘ë™ ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šìœ¼ë©´
        // ìŠ¬ë¼ì´ë“œê°€ ì¸ë±ìŠ¤ ë°–ìœ¼ë¡œ ë›°ì³ ë‚˜ê°€ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
        // í”Œë ˆì´ ìƒíƒœë¥¼ ë‹´ëŠ” ë³€ìˆ˜ / if ë¬¸ / setTimeoutì„ ì´ìš©í•´ ì²˜ë¦¬ ê°€ëŠ¥í•©ë‹ˆë‹¤.

        // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚  ë•Œê¹Œì§€ ë²„íŠ¼ í´ë¦­ì´ ì‘ë™í•˜ì§€ ì•Šê²Œ í•´ë¼.

        // if (ì• ë‹ˆë§¤ì´ì…˜ì´ ëë‚¨) {ë²„íŠ¼í´ë¦­ ì‘ë™} / (ì•ˆëë‚¨) {ë²„íŠ¼í´ë¦­ì‘ë™ no}

        
        // í´ë¦­í–ˆì„ë•Œ 
        // ì• ë‹ˆë©”ì´ì…˜ì´ëë‚˜ë©´ {}

        //     if(index > contentWrapper.childElementCount-viewCount) {
        //         index = 0 ;
                
        //     }
        //     applyIndexToSlider(true)
        // }
        

        function applyIndexToSlider(animation){
            if(animation) {
                contentWrapper.style.transition = `${playTime}ms`;
            } else {
                contentWrapper.style.transition = 'none';
            }
            contentWrapper.style.transform = `translateX(${index * -(contentSlider + gap)}px)`
        }
    </script>
</body>
</html>